(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{228:function(s,t,e){"use strict";e.r(t);var a=e(2),n=Object(a.a)({},function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"helper"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#helper","aria-hidden":"true"}},[s._v("#")]),s._v(" helper")]),s._v(" "),e("blockquote",[e("p",[s._v("视图层中使用的 helper")])]),s._v(" "),e("h2",{attrs:{id:"application-helper"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#application-helper","aria-hidden":"true"}},[s._v("#")]),s._v(" application_helper")]),s._v(" "),e("blockquote",[e("p",[s._v("添加 ： include SessionsHellper")])]),s._v(" "),e("h2",{attrs:{id:"some-customize-helpers"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#some-customize-helpers","aria-hidden":"true"}},[s._v("#")]),s._v(" some customize helpers")]),s._v(" "),e("div",{staticClass:"language-rb extra-class"},[e("pre",{pre:!0,attrs:{class:"language-rb"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("module")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token constant"}},[s._v("SesssionsHelper")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 登录存 session")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token method-definition"}},[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("login")])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("user"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        session"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),e("span",{pre:!0,attrs:{class:"token symbol"}},[s._v(":user_id")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" user"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("id\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v("\n\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 返回当前用户")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token method-definition"}},[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("current_user")])]),s._v("\n        uid "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" session"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),e("span",{pre:!0,attrs:{class:"token symbol"}},[s._v(":user_id")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\n        "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# find: 如果找不到，会返回 exception")]),s._v("\n        "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# find_by: 如果找不到，会返回 nil")]),s._v("\n        "),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@current_user")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@current_user")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token constant"}},[s._v("User")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("find_by"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("uid"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v("\n\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 判断用户是否已经登录")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token method-definition"}},[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("login")])]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),s._v("\n        "),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@current_user")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("nil")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v("\n\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 注销登录")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token method-definition"}},[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("logout")])]),s._v("\n        session"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("delete"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token symbol"}},[s._v(":user_id")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        "),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@current_user")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("nil")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v("\n")])])])])},[],!1,null,null,null);t.default=n.exports}}]);