(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{208:function(s,t,a){"use strict";a.r(t);var e=a(2),n=Object(e.a)({},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"rails-pages"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#rails-pages","aria-hidden":"true"}},[s._v("#")]),s._v(" rails_pages")]),s._v(" "),a("blockquote",[a("p",[s._v("自己的一第一个公用 rails 模块实战项目。")])]),s._v(" "),a("h2",{attrs:{id:"step-by-step"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#step-by-step","aria-hidden":"true"}},[s._v("#")]),s._v(" step by step")]),s._v(" "),a("ol",[a("li",[s._v("新建 "),a("code",[s._v("rails_pages")]),s._v(" 项目")])]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# 像正常项目一样新建\nrails plugin rails_pages --mountable\n")])])]),a("ol",{attrs:{start:"2"}},[a("li",[s._v("创建一个 "),a("code",[s._v("pages_controller")])])]),s._v(" "),a("blockquote",[a("p",[s._v("位置在 controller/rails_pages/pages_controller.rb")])]),s._v(" "),a("div",{staticClass:"language-rb extra-class"},[a("pre",{pre:!0,attrs:{class:"language-rb"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# rails g controller pages")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# controller")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("module")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("RailsPages")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("PagesController")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("ApplicationController")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("RailsPages")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("configuration"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("pages"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("each")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("page"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("define_method")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("page"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("@page_name")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" page\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v("\n")])])]),a("ol",{attrs:{start:"3"}},[a("li",[s._v("路由模块 "),a("code",[s._v("config/routes.rb")])])]),s._v(" "),a("blockquote",[a("p",[s._v("这里自己还存在的疑问是，路由为什么不需要在 rails_pages/routes.rb 下面")])]),s._v(" "),a("div",{staticClass:"language-rb extra-class"},[a("pre",{pre:!0,attrs:{class:"language-rb"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("module")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("RailsPages")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("Rails")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("application"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("routes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("draw "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 这里不加判断会在初始化装 gem 的时候报错")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("unless")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("RailsPages")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("configuration"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("nil")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("RailsPages")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("configuration"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("pages"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("each")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("page"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n        mounted_at "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("RailsPages")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("Engine")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("routes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("find_script_name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("slice"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        get "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token delimiter tag"}},[s._v("#{")]),s._v("mounted_at"),a("span",{pre:!0,attrs:{class:"token delimiter tag"}},[s._v("}")])]),s._v("/"),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token delimiter tag"}},[s._v("#{")]),s._v("page"),a("span",{pre:!0,attrs:{class:"token delimiter tag"}},[s._v("}")])]),s._v('"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" to"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"rails_pages/pages#'),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token delimiter tag"}},[s._v("#{")]),s._v("page"),a("span",{pre:!0,attrs:{class:"token delimiter tag"}},[s._v("}")])]),s._v('"')]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("end")]),s._v("\n")])])]),a("ol",{attrs:{start:"4"}},[a("li",[s._v("其它  generator 部分的核心代码如下：")])]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("$ tree\n.\n├── generators\n│   └── rails_pages\n│       ├── initializer_generator.rb\n│       ├── install_generator.rb\n│       ├── page_generator.rb\n│       └── templates\n│           ├── initializers\n│           │   └── rails_pages.rb\n│           └── views\n│               ├── application.html.erb\n│               └── page.html.erb\n├── rails_pages\n│   ├── engine.rb\n│   └── version.rb\n├── rails_pages.rb\n└── tasks\n    └── rails_pages_tasks.rake\n")])])]),a("h2",{attrs:{id:"resources"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#resources","aria-hidden":"true"}},[s._v("#")]),s._v(" resources")]),s._v(" "),a("ul",[a("li",[s._v("https://github.com/afeiship/rails_pages")])])])},[],!1,null,null,null);t.default=n.exports}}]);